
(function(){const q=(s)=>document.querySelector(s);const getN=()=>decodeURIComponent((location.hash||'').replace(/^#/,'')).trim();const key=(n)=>`hime_memo_${n}`;function load(n){try{return JSON.parse(localStorage.getItem(key(n))||'{}')}catch(e){return{}}}function save(n,o){localStorage.setItem(key(n),JSON.stringify(o||{}))}function fill(n){q('#custTitle').textContent=`顧客メモ：${n||'(未指定)'}`;const d=load(n);['nm','age','bd','drink','smoke','hobby','note'].forEach(id=>{if(q('#'+id))q('#'+id).value=d[id]||(id==='nm'?n:'');});}function gather(){return{nm:q('#nm').value||'',age:q('#age').value||'',bd:q('#bd').value||'',drink:q('#drink').value||'',smoke:q('#smoke').value||'',hobby:q('#hobby').value||'',note:q('#note').value||''}}const nm=getN();fill(nm);const b=q('#saveBtn');b&&b.addEventListener('click',()=>{save(nm,gather());alert('保存しました');});})();
