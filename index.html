<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>himegoto（β）</title>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ff6ea6">
  <link rel="icon" href="/icon-192.png">
  <link rel="apple-touch-icon" href="/icon-192.png">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <!-- 固定ヘッダ＋ハンバーガー -->
  <header class="header">
    <button class="hamburger" id="menuBtn" aria-label="menu">≡</button>
    <div class="brand">
      <img src="/logo_himegoto.png" alt="himegoto" class="logo">
    </div>
    <div class="spacer"></div>
    <div class="version">ver.1.31β</div>
  </header>

  <!-- ドロワ -->
  <aside class="drawer" id="drawer" aria-hidden="true">
    <div class="drawer-header"><strong>メニュー</strong></div>
    <nav><ul class="nav">
      <li><a href="/index.html">ホーム</a></li>
      <li><a href="/help.html">アプリ用途</a></li>
      <li><a href="/help.html#howto">使い方</a></li>
      <li><a href="/qa.html">Q&amp;A</a></li>
      <li><a href="/feedback.html">ご意見・ご要望</a></li>
      <li><a href="/register.html">登録と紹介</a></li>
      <li><a href="/privacy.html">プライバシーポリシー</a></li>
      <li><a href="/terms.html">規約</a></li>
      <li><a href="/terms.html#tokushoho">特定商取引法の表記（準備中）<span class="small">及び運営者情報</span></a></li>
      <li><a href="javascript:void(0)">version：<span class="pill">ver.1.31β</span></a></li>
    </ul></nav>
  </aside>
  <div class="scrim" id="scrim"></div>

  <main class="container">
    <!-- 顧客リスト -->
    <section class="card">
      <h2>顧客リスト <small id="reg-remain"></small></h2>
      <div class="row">
        <input id="add-input" type="text" inputmode="text" placeholder="顧客名を入力">
        <button id="add-btn">追加</button>
      </div>
      <div class="customer-list"></div>
    </section>

    <!-- 本文（見出しはここに） -->
    <section class="card">
      <h2>メッセージ作成</h2>
      <p class="note">本文に <code>{name}</code> を入れると選択中の顧客名に差し替わります。</p>
      <textarea id="message" rows="8" placeholder="今日はありがとう{name}さん。来てくれて本当に助かった〜！この前の話の続きも聞きたいな✨ 次は金曜日に出勤してるから、もし{name}さんの都合が良かったらやけど、また来てくれたら嬉しい…待ってるね❤"></textarea>
      <div class="row right">
        <button id="insert-name" class="ghost">{name} を挿入</button>
        <button id="share-btn" class="primary">共有</button>
      </div>
      <div class="muted" id="remain-badge">残り 5 回</div>
      <div class="help">共有ボタンを押した瞬間に当日の回数を消費（コピー共有も対象）。</div>
    </section>
  
    <!-- バックアップと復元 -->
    <section class="card">
      <h2>バックアップと復元</h2>
      <p class="note">今の登録内容（顧客・選択中の名前・当日の残り回数）をひとつのファイルにまとめます。万が一に備えて、ときどき保存してください。</p>
      <div class="row">
        <button id="backup-btn">バックアップを作る</button>
        <input id="restore-file" type="file" accept=".json" style="display:none">
        <button id="restore-btn">復元する</button>
      </div>
      <p class="help">復元すると、保存時点の内容に入れ替わります。迷ったらまずバックアップを作っておけば安心です。</p>
    </section>
    
  </main>

  <script>
    // ドロワ開閉
    (function(){
      const d=document.getElementById('drawer'),s=document.getElementById('scrim');
      const open=()=>{d.classList.add('open');s.classList.add('show');d.setAttribute('aria-hidden','false');};
      const close=()=>{d.classList.remove('open');s.classList.remove('show');d.setAttribute('aria-hidden','true');};
      document.getElementById('menuBtn').addEventListener('click',open);
      s.addEventListener('click',close);
      d.addEventListener('click',e=>{if(e.target.matches('a')) close();});
    })();
  </script>
  <script src="/app.js"></script>
</body>
</html>